# ==========================================
# Application Configuration
# ==========================================
ENV=development
PROJECT_NAME="AI Fintech Services"
VERSION="2.0.0"
API_V1_STR="/api/v1"

# ==========================================
# Service Ports (Microservices)
# ==========================================
GATEWAY_PORT=8000           # API Gateway (main entry point)
CLASSIFIER_PORT=8001        # Expense Classifier Service
ANALYSIS_PORT=8002          # Prophet Analysis Service
CSV_MANAGER_PORT=8003       # CSV Manager Service

# ==========================================
# Service URLs (Docker Internal Network)
# ==========================================
CLASSIFIER_SERVICE_URL=http://classifier:8001
ANALYSIS_SERVICE_URL=http://analysis:8002
CSV_MANAGER_SERVICE_URL=http://csv-manager:8003

# ==========================================
# GMS API Configuration (GPT-5-nano)
# ==========================================
# Required for AI Category Classification and Saving Recommendations
GMS_API_KEY=your-gms-api-key-here
GMS_BASE_URL=https://api.gms.com/v1  # Replace with actual GMS endpoint
GMS_MODEL=gpt-5-nano
GMS_MAX_TOKENS=1000
GMS_TEMPERATURE=0.3

# Advanced Prompting Features
GMS_USE_STRUCTURED_OUTPUTS=true    # Enforce JSON Schema
GMS_USE_CHAIN_OF_THOUGHT=true      # Enable CoT reasoning
GMS_USE_FEW_SHOT=true              # Enable few-shot learning (3 examples)

# ==========================================
# MinIO/S3 Configuration (Object Storage)
# ==========================================
# Required for CSV file storage
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=csv-uploads
MINIO_SECURE=false                 # Set to true in production with SSL
MINIO_REGION=us-east-1
VERIFY_SSL=false                   # Set to true in production

# Presigned URL Settings
PRESIGNED_URL_EXPIRY=3600          # 1 hour (in seconds)

# ==========================================
# Redis Configuration (Cache & State)
# ==========================================
# Required for CSV metadata and status management
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=                    # Optional, leave empty for dev

# ==========================================
# Azure MySQL Configuration (Database)
# ==========================================
# Required for Prophet analysis results storage
# Note: SSL connection is required for Azure MySQL
MYSQL_HOST=your-server.mysql.database.azure.com
MYSQL_PORT=3306
MYSQL_DATABASE=your-database
MYSQL_USER=your-username@your-server
MYSQL_PASSWORD=your-password
MYSQL_ROOT_PASSWORD=your-password

# Database URL (URL encode special characters, e.g., % becomes %25)
DATABASE_URL=mysql+pymysql://username:password@your-server.mysql.database.azure.com:3306/database?charset=utf8mb4

# ==========================================
# Authentication Tokens
# ==========================================
# Admin Token: Upload, Delete, Classify, Analyze
ADMIN_TOKEN=admin-token

# User Token: View Status, Query Results
USER_TOKEN=user-token

# JWT Settings (Optional - for future OAuth integration)
JWT_SECRET_KEY=your-secret-key-for-jwt-signing
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==========================================
# CORS Configuration
# ==========================================
BACKEND_CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]

# ==========================================
# CSV Processing Settings
# ==========================================
CSV_MAX_FILE_SIZE=104857600        # 100MB in bytes
CSV_STATUS_AUTO_CLEAR=true         # Auto-clear status after processing
CSV_STATUS_CLEAR_DELAY=2           # seconds

# CSV Status States
# - uploading: S3 upload in progress
# - ingesting: Data processing and validation
# - analyzing: Prophet AI analysis
# - none: Idle state

# ==========================================
# Prophet Configuration (Time Series)
# ==========================================
PROPHET_FORECAST_PERIODS=30        # Days to forecast (default: 30)
PROPHET_CONFIDENCE_INTERVAL=0.95   # 95% confidence interval
PROPHET_SEASONALITY_MODE=additive  # additive or multiplicative

# ==========================================
# Logging Configuration
# ==========================================
LOG_LEVEL=INFO                     # DEBUG, INFO, WARNING, ERROR, CRITICAL

# ==========================================
# Security Settings
# ==========================================
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256

# File Validation
ALLOWED_CSV_CONTENT_TYPES=text/csv,application/csv,application/vnd.ms-excel,text/plain

# ==========================================
# Monitoring (Production)
# ==========================================
GRAFANA_PASSWORD=admin
PROMETHEUS_RETENTION=30d

# ==========================================
# Feature Flags
# ==========================================
ENABLE_RULE_BASED_POST_PROCESSING=true  # 7 brand matching rules
ENABLE_GPT_MESSAGE_GENERATION=true      # Personalized advice
ENABLE_DOOJO_ENDPOINT=true              # S3 CSV-based analysis