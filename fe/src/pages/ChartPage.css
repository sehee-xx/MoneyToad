/* 페이지 스크롤 보장 */
html.allow-scroll,
body.allow-scroll,
#root {
  height: auto !important;
  min-height: 100% !important;
  overflow-y: auto !important;
}

html {
  scroll-behavior: smooth;
}

/* 페이지 배경/여백 */
.jp-wrap {
  min-height: 100vh;
  padding: 32px clamp(20px, 5vw, 64px);
  background: #f7f2e6 url("/charts/forest.png") center/cover no-repeat;
  /* background-attachment: fixed 제거 */
  color: #2a241b;
}

/* 헤더 */
.jp-header {
  position: relative;
  max-width: 1180px;
  margin: -600px auto 18px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.jp-header h1 {
  margin: 0;
  font-size: clamp(18px, 2.6vw, 28px);
  position: relative;
  top: -70px;
  left: 0;
  transform: none;
  text-align: center;
}

.jp-header p {
  margin: 0;
  color: #6b5e4a;
  position: relative;
  top: -60px;
  left: 0;
  transform: none;
  text-align: center;
}

/* === 라인차트 섹션 === */
.jp-frame {
  max-width: 1180px;
  margin: 0 auto 24px;
}

/* 돌담 배경 이미지 (비율 고정) */
.jp-line-bg {
  position: relative;
  width: 100%;
  aspect-ratio: 3 / 2;
  background: url("/charts/line-chart.png") center/contain no-repeat;
}

/* === 새 반응형 이미지+차트 그룹 컨테이너 === */
.jp-center-set {
  position: relative;
  width: 90vw;
  max-width: 1180px;
  aspect-ratio: 3 / 1.9;
  margin: 0 auto;
  min-width: 320px;
}

/* 각 이미지 절대 위치를 부모 대비 비율로 지정 */
.jp-page-image,
.jp-toad-image,
.jp-water-image {
  position: absolute;
  width: auto;
  height: auto;
  max-width: none;
  transition: all 0.2s ease;
}

/* 비율과 위치는 디자인베이스 기준(수정 가능) */
.jp-page-image {
  top: 2%;
  left: 8%;
  width: 17%;
  z-index: 3;
  cursor: pointer;
  transform-origin: center center;
  transition: transform 0.3s ease;
}
.jp-page-image:hover {
  transform: translateY(-5px) translateX(3px) rotate(2deg);
}

.jp-toad-image {
  top: 2%;
  right: 8%;
  width: 17%;
  z-index: 3;
  cursor: pointer;
  transform-origin: 100% 100%;
  transition: transform 0.3s ease;
}
.jp-toad-image:hover {
  transform: translateX(-3px) rotate(-5deg);
}

.jp-water-image {
  bottom: 0;
  left: 0;
  width: 100%;
  height: auto;
  z-index: 2;
}

/* 라인차트 감싸는 컨테이너. 라인차트 위치 조절 */
.jp-linechart-wrap {
  position: absolute;
  left: 15%;
  right: 15%;
  top: 38%;
  bottom: 15%;
  z-index: 4;
  display: flex;
  align-items: center;
}

/* 월간 소비 그래프 섹션 기본 스타일 유지 */
.jp-frame {
  position: absolute;
  top: 500px;
  left: 230px;
  width: 950px;
  margin: 0;
  z-index: 15;
  /* 필요시 조정 가능 */
}

/* 차트 실제 그려질 영역(돌담 안쪽) */
.jp-chart-canvas {
  position: absolute;
  inset: 9% 7% 13% 7%;
  border: none;
}

/* Recharts 컨테이너가 캔버스를 꽉 채우도록 */
.jp-chart-canvas > .recharts-responsive-container {
  width: 100% !important;
  height: 100% !important;
}

.jp-card {
  max-width: 1180px;
  margin: 0 auto 28px;
  background: #f6efdf;
  border: 2px solid #c7b899;
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06);
}

/* === table과 pie chart 감싸는 컨테이너 위치 조절 === */
#jp-detail {
  scroll-margin-top: 24px;
  margin-top: 600px;
}

.jp-card-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.jp-head-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.jp-total {
  font-weight: 800;
  color: #3b3125;
}

.jp-grid {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 14px;
}

@media (max-width:980px) {
  .jp-grid {
    grid-template-columns: 1fr;
  }
}

/*테이블과 파이차트 감싸는 컨테이너*/
.jp-panel {
  background: #fffaf0;
  border: 1px solid #e1d6bf;
  border-radius: 14px;
  padding: 12px;
  box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.03);
  max-height: 500px; /* 높이 제한 */
  overflow-y: scroll; /* 스크롤 항상 표시 */
}

/* 크롬, 엣지, 사파리용 커스텀 스크롤바 */
.jp-panel::-webkit-scrollbar {
  width: 14px;
  background: #e5decf;
}

.jp-panel::-webkit-scrollbar-thumb {
  background: #bfae8d;
  border-radius: 8px;
  border: 3px solid #e5decf;
  box-shadow: 0 0 4px rgba(44, 38, 26, 0.12);
}

.jp-panel::-webkit-scrollbar-track {
  background: #f6efdf;
  border-radius: 8px;
}

/* 도구줄 / 셀렉트 */
.jp-toolbar {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.jp-toolbar label {
  font-weight: 700;
}

.jp-select {
  appearance: none;
  padding: 8px 36px 8px 12px;
  border-radius: 12px;
  border: 2px solid #c8b896;
  background:
    url("/charts/chevron-down.svg") right 10px center/16px no-repeat,
    #fffaf0;
  font-weight: 700;
  color: #3a2e22;
  box-shadow: inset 0 2px 0 rgba(255, 255, 255, 0.7);
}

.jp-select:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(191, 174, 141, 0.25);
}

/* 표 */
.jp-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}

.jp-table th,
.jp-table td {
  padding: 8px 6px;
  border-top: 1px solid #efe6d3;
}

.jp-table thead th {
  border-top: none;
  background: #f1e6cf;
}

.jp-table td.left {
  text-align: left;
}

.jp-pie-frame {
  border: 2px solid #c7b899;
  border-radius: 12px;
  padding: 8px;
  height: 96%; /* 부모 높이 100% 유지 */
  box-shadow: inset 0 0 0 6px #f3ead7;

  display: flex; /* 플렉스 박스 활성화 */
  justify-content: center; /* 가로 중앙 정렬 */
  align-items: center; /* 세로 중앙 정렬 */

  overflow: hidden; /* 필요시 넘침 숨김 */
}

/* 플로팅 버튼 */
.jp-fab {
  position: fixed;
  right: clamp(16px, 3vw, 28px);
  bottom: clamp(16px, 3vw, 28px);
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 2px solid #bfae8d;
  background: #efe6d1;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.18);
  font-weight: 900;
  color: #3b3125;
  cursor: pointer;
}

.jp-top-btn,
.jp-close {
  border: 1px solid #cabfa8;
  background: #efe6d1;
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
  font-weight: 800;
  color: #3b3125;
}

.jp-top-btn:hover,
.jp-close:hover,
.jp-fab:hover {
  transform: translateY(-1px);
}

/* Recharts 텍스트/툴팁 */
.recharts-default-legend {
  color: #32291e !important;
}

.recharts-tooltip-wrapper {
  filter: drop-shadow(0 6px 8px rgba(0, 0, 0, 0.1));
}
